!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";(function(e){function a(e){var t=e,n=new Date(t),a=t.indexOf("T")+1,i=parseInt(t.substring(a,a+2)),o=t.substring(a+3,a+5),s=i>=12&&0!==i?"PM":"AM";return i>=0&&i<5&&n.setDate(n.getDate()+1),i>12&&(i-=12),0===i&&(i=12),n.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})+", "+i+":"+o+" "+s}n.d(t,"a",(function(){return a}));try{e.exports=exports=a}catch(e){}}).call(this,n(1)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";n.r(t),n.d(t,"appState",(function(){return T})),n.d(t,"hideInsets",(function(){return M})),n.d(t,"showInsets",(function(){return I}));const a="https://votewithus.s3.amazonaws.com/events.json",i={AK:"Alaska",AL:"Alabama",AR:"Arkansas",AS:"American Samoa",AZ:"Arizona",CA:"California",CO:"Colorado",CT:"Connecticut",DC:"District of Columbia",DE:"Delaware",FL:"Florida",GA:"Georgia",GU:"Guam",HI:"Hawaii",IA:"Iowa",ID:"Idaho",IL:"Illinois",IN:"Indiana",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",MA:"Massachusetts",MD:"Maryland",ME:"Maine",MI:"Michigan",MN:"Minnesota",MO:"Missouri",MP:"Northern Mariana Islands",MS:"Mississippi",MT:"Montana",NC:"North Carolina",ND:"North Dakota",NE:"Nebraska",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NV:"Nevada",NY:"New York",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",PR:"Puerto Rico",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VA:"Virginia",VI:"Virgin Islands",VT:"Vermont",WA:"Washington",WI:"Wisconsin",WV:"West Virginia",WY:"Wyoming"},o={AK:[-179.231086,51.175092,-127.859681,71.441059],GU:[144.563426,13.182335,145.009167,13.706179],HI:[-161.03759765625,18.542116654448996,-154.22607421875,22.573438264572406],PR:[-67.998751,17.831509,-65.168503,18.568002]},s=new URLSearchParams(window.location.search),r=(parseInt(s.get("day")),s.get("referral"),{id:"event-pins",type:"symbol",source:"event-points",layout:{"icon-image":"{icon}","icon-size":.15,"icon-allow-overlap":!0}});var l=n(0);let d=[];fetch(a).then(e=>e.json()).then(e=>{d=e.features.map(e=>{const t=e.properties,n=t.location.split(",");return n[0].includes("http")&&(t.localStreamLink||(t.localStreamLink=n[0]),t.location=n.slice(1).join(",")),t.id=e.id,t}).sort((e,t)=>Date.parse(e.timestamp)-Date.parse(t.timestamp)),c()});let c=()=>{m(d)};let u=e=>e.map(e=>(e=>{let t=Object(l.a)(e.timestamp);return`\n    <div class="event-card ${e.eventType} ${e.featured?"featured":""}" id="${e.id}-card">\n        <div>\n            <ul class="event-type-label unstyled-list">\n                <span class="${e.eventType}-icon icon"></span>\n                <span>${"virtual"===e.eventType?"Virtual":"In Person"}</span>\n                ${e.featured?"<li>Featured</li>":""}\n            </ul>\n            <h4 class="card-title">${e.name}</h4>\n            <ul class="unstyled-list">\n                <li>${t}</li>\n            </ul>\n            </div>\n            <div class="button-container">\n                <div class="link-button peach-gradient"><a href="${e.eventLink}">RSVP</a></div>\n                    ${e.localStreamLink?`<div class="link-button green-gradient"><a href="${e.localStreamLink}">Stream</a></div>`:""}\n        </div>\n       \n    </div>`})(e));const p=(()=>{let e={};return()=>{if(!T)return null;const t=T.eventTypeFilter;if(e[t])return e[t];{let n=(()=>{const e=T.eventTypeFilter;return d.filter(t=>!e||t.eventType===e)})();return e[t]=n,n}}})();const m=e=>{let t=document.getElementById("list-view"),n=u(e);if(t.innerHTML="",!e.length)return t.innerHTML='<div class="no-events-response">There are no events within your search location, try different location or expand your search area.</div>';t.innerHTML=n.join("")},f=e=>{let t=(e=>p().filter(t=>{let n=i[t.state];return e.city?t.city.toLowerCase()===e.city.toLowerCase()&&n.toLowerCase()===e.state.toLowerCase():e.state.toLowerCase()===n.toLowerCase()}))(e);m(t)},h={top:40,bottom:150,right:0,left:0},v={top:40,bottom:40,right:0,left:0};function g(e,t){this.mapId=e,this.bounds=t,this.hoveredPopup=null}g.prototype.resetBounds=function(){this.resetView()},g.initFilters=function(){T.numMapsLoaded===T.totalMaps&&window.setState(null)},g.getEventTypeFilter=function(){var e=T.eventTypeFilter;return e?["==",["get","eventType"],e]:null},g.getTypeFilter=function(){return T.featured?["==",["get","featured"],!0]:null},g.prototype.makeZoomToNationalButton=function(){document.querySelector(".mapboxgl-ctrl-compass").remove(),document.querySelector(".mapboxgl-ctrl-usa")&&document.querySelector(".mapboxgl-ctrl-usa").remove();var e=document.createElement("button");e.className="mapboxgl-ctrl-icon mapboxgl-ctrl-usa",e.innerHTML='<span class="usa-icon"></span>',e.addEventListener("click",()=>this.resetView()),document.querySelector(".mapboxgl-ctrl-group").appendChild(e)},g.prototype.setTypeFilters=function(){var e=g.getEventTypeFilter(),t=g.getTypeFilter();if(this.hoveredPopup.remove(),!e&&!t)return this.map.setFilter("event-pins",null);var n=[];return n=e&&t?["all",t,e]:t||e,this.map.setFilter("event-pins",n)},g.addImages=function(e){let t=0;return new Promise((function(n,a){e.map.loadImage("./images/in-person-featured.png",(function(a,i){if(a)throw a;e.map.addImage("in-person-featured",i),t++,4===t&&n()})),e.map.loadImage("./images/in-person.png",(function(a,i){if(a)throw a;e.map.addImage("in-person",i),t++,4===t&&n()})),e.map.loadImage("./images/virtual-featured.png",(function(a,i){if(a)throw a;e.map.addImage("virtual-featured",i),t++,4===t&&n()})),e.map.loadImage("./images/virtual.png",(function(a,i){if(a)throw a;e.map.addImage("virtual",i),t++,4===t&&n()}))}))},g.prototype.addPointsLayer=function(){let e=this;g.addImages(e).then(t=>{e.map.addLayer(r)}),T.onMapLoaded(),g.initFilters()},g.prototype.resize=function(){this.mapPadding=window.innerWidth<700?v:h,this.map.fitBounds(this.bounds,{duration:1e3,padding:this.mapPadding}),this.map.resize()},g.prototype.resetView=function(){I();let e=p();m(e),this.map.fitBounds(this.bounds,{duration:1e3,padding:this.mapPadding})},g.prototype.init=function(){var e=this,t=window.map=new mapboxgl.Map({container:this.mapId,center:[-100.486052,37.830348],zoom:2,style:"mapbox://styles/wearemarchon/ck7fiejvh0j6d1jo2wzsahijn"});this.map=t,window.addEventListener("resize",()=>{e.resize()}),this.mapPadding=window.innerWidth<700?v:h,t.addControl(new mapboxgl.NavigationControl),t.addControl(new MapboxGeocoder({accessToken:mapboxgl.accessToken,mapboxgl:mapboxgl,countries:"us",marker:!1,zoom:12}).on("clear",(function(t){e.resetView()})).on("result",(function(e){let t=e.result,n=t.place_type[0],a={state:"",city:""};"region"===n?a.state=t.text:"place"===n?(a.city=t.text,t.place_name.includes("District of Columbia")?a.state="District of Columbia":a.state=STATE_NAMES.find(e=>t.place_name.includes(e))):"postcode"===n&&(a.city=t.place_name.split(",")[0],a.state=STATE_NAMES.find(e=>t.place_name.includes(e))),f(a),M()})),"top-left"),t.dragRotate.disable(),t.touchZoomRotate.disableRotation(),t.fitBounds(new mapboxgl.LngLatBounds(new mapboxgl.LngLat(-127.119844,25.393099),new mapboxgl.LngLat(-64.920107,50.095843)),{animate:!1,padding:this.mapPadding}),this.makeZoomToNationalButton(),t.on("load",(function(){t.addSource("event-points",{type:"geojson",data:a}),e.addPointsLayer(),e.hoveredPopup=new mapboxgl.Popup({offset:25,closeButton:!0,closeOnClick:!1}),t.on("click","event-pins",(function(e){if(e.features.length>0){var n=e.features[0].geometry.coordinates.slice();(e=>{Array.from(document.getElementsByClassName("event-card")).forEach((function(e){e.classList.remove("active")}));let t=document.getElementById(e);t.classList.add("active"),t.scrollIntoView({block:"center"})})(e.features[0].id+"-card"),M(),t.flyTo({center:n})}}));var n=null,i=document.getElementById(e.mapId);t.on("mousemove","event-pins",(function(a){if(a.features.length>0){var o=a.features[0].geometry.coordinates.slice();n&&t.setFeatureState({source:"event-points",id:n},{hover:!1}),n=a.features[0].id,t.setFeatureState({source:"event-points",id:n},{hover:!0}),i.style.cursor="pointer",e.hoveredPopup.setLngLat(o).setHTML(function(e){var t=e.features[0].properties,n=t.name,a=t.location.split(",")[0].trim(),i=Object(l.a)(t.timestamp);return`<div class="map-popup">\n        <h4><a href="${t.eventLink}">${n.toUpperCase()}</a></h4>\n            <ul class="unstyled-list">\n                <li>${i}</li>\n                <li>${a}</li>\n                <li>${t.city}, ${t.state}</li>\n            </ul>\n        </div>`}(a)).addTo(t)}})),t.on("mouseleave","event-pins",(function(){n&&(t.setFeatureState({source:"event-points",id:n},{hover:!1}),i.style.cursor="grab"),n=null}))}))};var y=g;function b(e,t,n,a){this.state=e,this.mapId=t,this.bounds=n,this.mainMap=a}b.prototype.resize=function(){this.map.resize()},b.prototype.resetBounds=function(){this.map.fitBounds(this.bounds)},b.prototype.setTypeFilters=function(e){var t=["all",["==",["get","state"],this.state]],n=y.getEventTypeFilter(),a=y.getTypeFilter();if(n&&t.push(n),a&&t.push(a),this.map.getLayer("event-pins"))return this.map.setFilter("event-pins",t)},b.prototype.addPointsLayer=function(){let e=this;y.addImages(e).then(()=>{e.map.addLayer(r),e.map.setFilter("event-pins",["==",["get","state"],e.state]),T.onMapLoaded(),y.initFilters()})},b.prototype.init=function(){this.map=new mapboxgl.Map({container:this.mapId,doubleClickZoom:!1,dragPan:!1,scrollZoom:!1,style:"mapbox://styles/wearemarchon/ck7fiejvh0j6d1jo2wzsahijn"}),window.addEventListener("resize",this.resize),this.map.fitBounds(this.bounds,{easeTo:{duration:0},linear:!0}),this.map.on("load",()=>{this.map.addSource("event-points",{type:"geojson",data:a}),this.addPointsLayer()});let e=this.mainMap,t=this.bounds;this.map.on("click",(function(n){M(),e.map.fitBounds(t,{easeTo:{duration:0}})}))};var w=b;var L=class{constructor(){this._featured=!1,this._eventTypeFilter,this._numMapsLoaded=0,this._allMaps=[],this.totalMaps=5}get numMapsLoaded(){return this._numMapsLoaded}get featured(){return this._featured}get eventTypeFilter(){return this._eventTypeFilter}get allMaps(){return this._allMaps}set eventTypeFilter(e){this._eventTypeFilter=e}onMapLoaded(){this._numMapsLoaded++}addMap(e){this._allMaps.push(e)}toggleFeatured(){this._featured=!this._featured}};mapboxgl.accessToken="pk.eyJ1Ijoid2VhcmVtYXJjaG9uIiwiYSI6ImNqdTFscXo3ZzAwYTE0ZWxzMWhrNnVtNHIifQ.ql7OysgSLnCazbiXZt8NFA";const T=new L;function M(){Array.from(document.getElementsByClassName("inset")).forEach((function(e){e.classList.add("hidden")}))}function I(){Array.from(document.getElementsByClassName("inset")).forEach((function(e){e.classList.remove("hidden")}))}var F=Array.from(document.getElementsByClassName("date-button"));window.setState=function(e){const t=T.eventTypeFilter;if(e!==t){if(t&&document.getElementById("map").classList.remove("day-"+t),e&&document.getElementById("map").classList.add("day-"+e),e)for(var n=0;n<F.length;n++)e===F[n].id?F[n].classList.add("active"):F[n].classList.remove("active");else F.forEach(e=>{e.classList.remove("active")}),F[0].classList.add("active");T.eventTypeFilter=e,I(),T.allMaps.forEach((function(e){e.setTypeFilters&&(e.setTypeFilters(),e.resetBounds())}))}},window.toggleFilter=function(e,t){Array.from(document.getElementsByClassName("filter-label")).forEach((function(e){e.classList.remove("active")})),T.toggleFeatured();T.featured?t.classList.add("active"):t.classList.remove("active"),T.allMaps.forEach((function(e){e.setTypeFilters&&e.setTypeFilters()}))},function(){let e=new y("map",[-127.119844,25.393099,-64.920107,50.095843]);["AK","HI","PR","GU"].forEach((function(t){let n=new w(t,t.toLowerCase()+"-inset",o[t],e);n.init(),T.addMap(n)})),e.init(),T.addMap(e)}()}]);