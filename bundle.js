!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";(function(e){function i(e){var t=e,n=new Date(t),i=t.indexOf("T")+1,o=parseInt(t.substring(i,i+2)),a=t.substring(i+3,i+5),r=o>=12&&0!==o?"PM":"AM";return o>=0&&o<5&&n.setDate(n.getDate()+1),o>12&&(o-=12),0===o&&(o=12),n.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})+" "+o+":"+a+" "+r}n.d(t,"a",(function(){return i}));try{e.exports=exports=i}catch(e){}}).call(this,n(1)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";n.r(t),n.d(t,"setState",(function(){return L})),n.d(t,"numDone",(function(){return T})),n.d(t,"incrementNumDone",(function(){return x})),n.d(t,"totalMaps",(function(){return I}));const i="./test-data.json";const o={AK:[-179.231086,51.175092,-127.859681,71.441059],GU:[144.563426,13.182335,145.009167,13.706179],HI:[-161.03759765625,18.542116654448996,-154.22607421875,22.573438264572406],PR:[-67.998751,17.831509,-65.168503,18.568002]},a=new URLSearchParams(window.location.search),r=(parseInt(a.get("day")),a.get("referral"),{id:"event-pins",type:"symbol",source:"event-points",layout:{"icon-image":"{icon}","icon-size":.25}}),s={top:40,bottom:150,right:0,left:0},l={top:40,bottom:40,right:0,left:0};function u(e,t){this.mapId=e,this.bounds=t,this.hoveredPopup=null}u.prototype.resetBounds=function(){this.resetView()},u.initFilters=function(){T===I&&L(null)},u.getEventTypeFilter=function(){var e=currentState;return e?["==",["get","eventType"],e]:null},u.getTypeFilter=function(){return featured?["==",["get","featured"],!0]:null},u.prototype.makeZoomToNationalButton=function(){document.querySelector(".mapboxgl-ctrl-compass").remove(),document.querySelector(".mapboxgl-ctrl-usa")&&document.querySelector(".mapboxgl-ctrl-usa").remove();var e=document.createElement("button");e.className="mapboxgl-ctrl-icon mapboxgl-ctrl-usa",e.innerHTML='<span class="usa-icon"></span>',e.addEventListener("click",()=>this.resetView()),document.querySelector(".mapboxgl-ctrl-group").appendChild(e)},u.prototype.setTypeFilters=function(){var e=u.getEventTypeFilter(),t=u.getTypeFilter();if(this.hoveredPopup.remove(),!e&&!t)return this.map.setFilter("event-pins",null);var n=[];return n=e&&t?["all",t,e]:t||e,this.map.setFilter("event-pins",n)},u.addImages=function(e){let t=0;return new Promise((function(n,i){e.map.loadImage("./images/in-person-featured.png",(function(i,o){if(i)throw i;e.map.addImage("in-person-featured",o),t++,4===t&&n()})),e.map.loadImage("./images/in-person.png",(function(i,o){if(i)throw i;e.map.addImage("in-person",o),t++,4===t&&n()})),e.map.loadImage("./images/virtual-featured.png",(function(i,o){if(i)throw i;e.map.addImage("virtual-featured",o),t++,4===t&&n()})),e.map.loadImage("./images/virtual.png",(function(i,o){if(i)throw i;e.map.addImage("virtual",o),t++,4===t&&n()}))}))},u.prototype.addPointsLayer=function(){let e=this;u.addImages(e).then(t=>{e.map.addLayer(r)}),x(),u.initFilters()},u.prototype.resize=function(){this.mapPadding=window.innerWidth<700?l:s,this.map.fitBounds(this.bounds,{duration:1e3,padding:this.mapPadding}),this.map.resize()},u.prototype.resetView=function(){showInsets();let e=getEventsForDateMem();renderList(e),this.map.fitBounds(this.bounds,{duration:1e3,padding:this.mapPadding})},u.prototype.init=function(){var e=this,t=window.map=new mapboxgl.Map({container:this.mapId,center:[-100.486052,37.830348],zoom:2,style:"mapbox://styles/wearemarchon/ck7fiejvh0j6d1jo2wzsahijn"});this.map=t,window.addEventListener("resize",()=>{e.resize()}),this.mapPadding=window.innerWidth<700?l:s,t.addControl(new mapboxgl.NavigationControl),t.addControl(new MapboxGeocoder({accessToken:mapboxgl.accessToken,mapboxgl:mapboxgl,countries:"us",marker:!1,zoom:12}).on("clear",(function(t){e.resetView()})).on("result",(function(e){let t=e.result,n=t.place_type[0],i={state:"",city:""};"region"===n?i.state=t.text:"place"===n?(i.city=t.text,t.place_name.includes("District of Columbia")?i.state="District of Columbia":i.state=STATE_NAMES.find(e=>t.place_name.includes(e))):"postcode"===n&&(i.city=t.place_name.split(",")[0],i.state=STATE_NAMES.find(e=>t.place_name.includes(e))),renderSearchResults(i),hideInsets()})),"top-left"),t.dragRotate.disable(),t.touchZoomRotate.disableRotation(),t.fitBounds(new mapboxgl.LngLatBounds(new mapboxgl.LngLat(-127.119844,25.393099),new mapboxgl.LngLat(-64.920107,50.095843)),{animate:!1,padding:this.mapPadding}),this.makeZoomToNationalButton(),t.on("load",(function(){t.addSource("event-points",{type:"geojson",data:i}),e.addPointsLayer(),e.hoveredPopup=new mapboxgl.Popup({offset:25,closeButton:!0,closeOnClick:!1}),t.on("click","event-pins",(function(e){if(e.features.length>0){var n=e.features[0].geometry.coordinates.slice(),i=e.features[0];updateListSelection(i.id+"-card"),hideInsets(),t.flyTo({center:n})}}));var n=null,o=document.getElementById(e.mapId);t.on("mousemove","event-pins",(function(i){if(i.features.length>0){var a=i.features[0].geometry.coordinates.slice();n&&t.setFeatureState({source:"event-points",id:n},{hover:!1}),n=i.features[0].id,t.setFeatureState({source:"event-points",id:n},{hover:!0}),o.style.cursor="pointer",e.hoveredPopup.setLngLat(a).setHTML(markerHtml(i)).addTo(t)}})),t.on("mouseleave","event-pins",(function(){n&&(t.setFeatureState({source:"event-points",id:n},{hover:!1}),o.style.cursor="grab"),n=null}))}))};var d=u;function c(e,t,n,i){this.state=e,this.mapId=t,this.bounds=n,this.mainMap=i}c.prototype.resize=function(){this.map.resize()},c.prototype.resetBounds=function(){this.map.fitBounds(this.bounds)},c.prototype.setTypeFilters=function(e){var t=["all",["==",["get","state"],this.state]],n=d.getEventTypeFilter(),i=d.getTypeFilter();if(n&&t.push(n),i&&t.push(i),this.map.getLayer("event-pins"))return this.map.setFilter("event-pins",t)},c.prototype.addPointsLayer=function(){let e=this;d.addImages(e).then(()=>{e.map.addLayer(r),e.map.setFilter("event-pins",["==",["get","state"],e.state]),x(),d.initFilters()})},c.prototype.init=function(){this.map=new mapboxgl.Map({container:this.mapId,doubleClickZoom:!1,dragPan:!1,scrollZoom:!1,style:"mapbox://styles/wearemarchon/ck7fiejvh0j6d1jo2wzsahijn"}),window.addEventListener("resize",this.resize),this.map.fitBounds(this.bounds,{easeTo:{duration:0},linear:!0}),this.map.on("load",()=>{this.map.addSource("event-points",{type:"geojson",data:i}),this.addPointsLayer()});let e=this.mainMap,t=this.bounds;this.map.on("click",(function(n){hideInsets(),e.map.fitBounds(t,{easeTo:{duration:0}})}))};var p=c,m=n(0);let f=[];fetch(i).then(e=>e.json()).then(e=>{f=e.features.map(e=>{const t=e.properties,n=t.location.split(",");return n[0].includes("http")&&(t.localStreamLink||(t.localStreamLink=n[0]),t.location=n.slice(1).join(",")),t.id=e.id,t}),h()});let h=()=>{v(f)},g=e=>e.map(e=>(e=>{let t=Object(m.a)(e.timestamp);return`\n    <div class="event-card ${e.eventType} ${e.featured?"featured":""}" id="${e.id}-card">\n        <div>\n        <h4>${e.name}</h4>\n        <ul class="unstyled-list">\n            <li>${t}</li>\n            <li>${e.location}</li>\n          \n        </ul>\n        </div>\n        <div class="button-container">\n          <div class="link-button peach-gradient"><a href="${e.eventLink}">RSVP</a></div>\n            ${e.localStreamLink?`<div class="link-button green-gradient"><a href="${e.localStreamLink}">Stream</a></div>`:""}\n        </div>\n       \n    </div>`})(e)),v=((()=>{let e={}})(),e=>{let t=document.getElementById("list-view"),n=g(e);if(t.innerHTML="",!e.length)return t.innerHTML='<div class="no-events-response">There are no events within your search location, try different location or expand your search area.</div>';t.innerHTML=n.join("")});mapboxgl.accessToken="pk.eyJ1Ijoid2VhcmVtYXJjaG9uIiwiYSI6ImNqdTFscXo3ZzAwYTE0ZWxzMWhrNnVtNHIifQ.ql7OysgSLnCazbiXZt8NFA";var y=[];var b=Array.from(document.getElementsByClassName("date-button")),w=null;function L(e){if(e!==w){if(w&&document.getElementById("map").classList.remove("day-"+w),e&&document.getElementById("map").classList.add("day-"+e),e)for(var t=0;t<b.length;t++)e===b[t].id?b[t].classList.add("active"):b[t].classList.remove("active");else b.forEach(e=>{e.classList.remove("active")}),b[0].classList.add("active");w=e,Array.from(document.getElementsByClassName("inset")).forEach((function(e){e.classList.remove("hidden")})),y.forEach((function(e){e.setTypeFilters&&(e.setTypeFilters(),e.resetBounds())}))}}let T=0;const x=()=>T++,I=5;!function(){let e=new d("map",[-127.119844,25.393099,-64.920107,50.095843]);["AK","HI","PR","GU"].forEach((function(t){let n=new p(t,t.toLowerCase()+"-inset",o[t],e);n.init(),y.push(n)})),e.init(),y.push(e)}()}]);